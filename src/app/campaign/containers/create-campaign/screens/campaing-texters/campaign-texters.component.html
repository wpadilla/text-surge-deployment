<div class="my-5 d-flex flex-column">
  <b>Va Dems</b>
  <h1>Justin Case for Governor 2021</h1>
</div>
<div class="col-12">
  <div class="d-flex justify-content-between my-4 align-items-center">
    <span class="subtitle">Select Phone Numbers</span>
    <p>40 required</p>
  </div>
  <div class="row campaign-texters-cmp-section">
    <ts-list-filters
      [dataToFilter]="phoneNumbers"
      (filterData)="setFilteredPhoneNumbers($event)"
    ></ts-list-filters>
    <p-table [value]="filteredPhoneNumbers"
             styleClass="p-datatable-sm"
             [(selection)]="phoneNumbersSelected"
    >
      <ng-template pTemplate="header">
        <tr>
          <th style="width: 3rem">
          </th>
          <th>Phone Number</th>
          <th>Location</th>
          <th></th>
          <th></th>
        </tr>
      </ng-template>
      <ng-template pTemplate="body" let-phoneNumber>
        <tr>
          <td>
            <p-tableCheckbox [value]="phoneNumber"></p-tableCheckbox>
          </td>
          <td>{{phoneNumber.phone}}</td>
          <td class="text-color-gray-2">{{phoneNumber.location}}</td>
          <td></td>
          <td></td>
        </tr>
      </ng-template>
    </p-table>
    <span class="error-message ms-3 mt-2" *ngIf="showErrorMessage && totalContacts <= 0" data-error-message="Must select at least 1 list"></span>
  </div>

  <div class="row campaign-texters-cmp-section">
    <h4 class="subtitle">Select Texters</h4>
    <ts-list-filters
      [dataToFilter]="texters"
      (filterData)="setFilteredTexters($event)"
      [sortByProperties]="sortByProperties"
    ></ts-list-filters>
    <p-table [value]="filteredTexters"
             styleClass="p-datatable-sm"
             (onRowSelect)="getInitialTextsDivision()"
             (onRowUnselect)="getInitialTextsDivision()"
             [(selection)]="textersSelected">
      <ng-template pTemplate="header">
        <tr>
          <th style="width: 3rem">
          </th>
          <th>Name</th>
          <th></th>
          <th>Status</th>
          <th></th>
          <th>Assigned</th>
        </tr>
      </ng-template>
      <ng-template pTemplate="body" let-texter>
        <tr>
          <td>
            <p-tableCheckbox [value]="texter"></p-tableCheckbox>
          </td>
          <td>{{texter.firstName}} {{texter.lastName}}</td>
          <td></td>
          <td>
            <ts-button-label
            [type]="'unassigned contacts'"
            [value]="'Assigment Request'">
            </ts-button-label>
          </td>
          <td></td>
          <td>{{texter.hasAssignments}} / 1 campaign</td>
        </tr>
      </ng-template>
    </p-table>
  </div>
  <div class="row mb-5">
    <ts-list [data]="textersSelected">
      <ng-template #listItem let-texter let-index="index">
        <span> {{texter.firstName}} {{ texter.lastName }}</span>
        <div>
          <b class="text-color-blue-5">{{ assignmentQuantityDivided[index] }}</b> initial texts
        </div>
        <div>
          <p-checkbox binary="true" inputId="binary"></p-checkbox>
        </div>
      </ng-template>
    </ts-list>
  </div>
  <div class="d-flex align-items-center">
    <ts-button  type="submit" value="Save and Continue" [disabled]="totalContacts <= 0" (click)="next()"></ts-button>
    <b class="ms-4" [class.error-message-text]="totalContacts <= 0 && showErrorMessage">{{totalContacts}} contacts selected</b>
  </div>
</div>
